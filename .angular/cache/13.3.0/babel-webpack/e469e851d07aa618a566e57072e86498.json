{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CountryAdminComponent = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst places_dbservice_1 = require(\"../../services/places.dbservice\");\n\nconst router_1 = require(\"@angular/router\");\n\nconst i0 = (0, tslib_1.__importStar)(require(\"@angular/core\"));\nconst i1 = (0, tslib_1.__importStar)(require(\"../../services/places.dbservice\"));\nconst i2 = (0, tslib_1.__importStar)(require(\"@angular/router\"));\nconst i3 = (0, tslib_1.__importStar)(require(\"@mobiscroll/angular\"));\nconst i4 = (0, tslib_1.__importStar)(require(\"@angular/forms\"));\n\nclass CountryAdminComponent {\n  constructor(placesDBService, router, activeRoute) {\n    this.placesDBService = placesDBService;\n    this.router = router;\n    this.activeRoute = activeRoute;\n    this.countries = [];\n    this.formSettings = {\n      theme: 'ios'\n    };\n    this.selectOptions = {\n      theme: 'ios',\n      headerText: 'Select'\n    };\n  }\n\n  ngOnInit() {\n    this.placesDBService.getCountriesFromDB(this.setCountries.bind(this));\n\n    if (this.placesDBService.getSelectedCountry()) {\n      let id = this.placesDBService.getSelectedCountry().id;\n      this.router.navigate(['edit'], {\n        relativeTo: this.activeRoute,\n        queryParams: {\n          id: id,\n          type: 'Country'\n        }\n      });\n    }\n  }\n\n  setCountries(countries) {\n    this.countrList = countries;\n\n    for (let entry in this.countries) {\n      this.countries.pop();\n    }\n\n    this.countries.push({\n      text: '',\n      value: '0'\n    });\n    this.countrList.forEach(country => {\n      this.countries.push({\n        text: country.name,\n        value: country.id\n      });\n\n      if (this.placesDBService.getSelectedCountry()) {\n        if (this.placesDBService.getSelectedCountry().id === country.id) {\n          this.selected = country.id;\n        }\n      }\n    });\n  }\n\n  countrySelected(event) {\n    let selected = this.countrList.find(item => {\n      return item.name === event.valueText;\n    });\n\n    if (!selected) {\n      this.router.navigate(['../countries'], {\n        relativeTo: this.activeRoute\n      });\n      this.placesDBService.setSelectedCountry(null);\n    } else {\n      this.placesDBService.setSelectedCountry(selected.id);\n      this.router.navigate(['edit'], {\n        relativeTo: this.activeRoute,\n        queryParams: {\n          id: selected.id,\n          type: 'Country'\n        }\n      });\n    }\n  }\n\n  createNewCountry() {\n    this.router.navigate(['new'], {\n      relativeTo: this.activeRoute,\n      queryParams: {\n        type: 'Country'\n      }\n    });\n  }\n\n}\n\nexports.CountryAdminComponent = CountryAdminComponent;\n\nCountryAdminComponent.ɵfac = function CountryAdminComponent_Factory(t) {\n  return new (t || CountryAdminComponent)(i0.ɵɵdirectiveInject(i1.PlacesDBService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\n\nCountryAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CountryAdminComponent,\n  selectors: [[\"app-country-admin\"]],\n  decls: 6,\n  vars: 3,\n  consts: [[1, \"mbsc-btn-group-block\"], [3, \"click\"], [\"type\", \"text\", \"name\", \"country\", \"mbsc-select\", \"\", \"placeholder\", \"Select A Country\", 3, \"mbsc-data\", \"mbsc-options\", \"ngModel\", \"ngModelChange\", \"onSet\"]],\n  template: function CountryAdminComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"mbsc-button\", 1);\n      i0.ɵɵlistener(\"click\", function CountryAdminComponent_Template_mbsc_button_click_1_listener() {\n        return ctx.createNewCountry();\n      });\n      i0.ɵɵtext(2, \"Create New Country\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"br\");\n      i0.ɵɵelementStart(4, \"mbsc-input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function CountryAdminComponent_Template_mbsc_input_ngModelChange_4_listener($event) {\n        return ctx.selected = $event;\n      })(\"onSet\", function CountryAdminComponent_Template_mbsc_input_onSet_4_listener($event) {\n        return ctx.countrySelected($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(5, \"router-outlet\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"mbsc-data\", ctx.countries)(\"mbsc-options\", ctx.selectOptions)(\"ngModel\", ctx.selected);\n    }\n  },\n  directives: [i3.MbscButton, i3.MbscInput, i3.MbscSelect, i4.NgControlStatus, i4.NgModel, i2.RouterOutlet],\n  styles: [\"\"]\n});","map":null,"metadata":{},"sourceType":"script"}