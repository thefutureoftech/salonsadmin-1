{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NavbarComponent = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst translate_service_1 = require(\"../../translate/translate.service\");\n\nconst langs_trans = (0, tslib_1.__importStar)(require(\"../../translate/langs.trans\"));\n\nconst router_1 = require(\"@angular/router\");\n\nconst cross_service_1 = require(\"../../services/cross.service\");\n\nconst auth_service_1 = require(\"../../services/auth.service\");\n\nconst operators_1 = require(\"rxjs/operators\");\n\nconst ng_block_ui_1 = require(\"ng-block-ui\");\n\nconst i0 = (0, tslib_1.__importStar)(require(\"@angular/core\"));\nconst i1 = (0, tslib_1.__importStar)(require(\"../../translate/translate.service\"));\nconst i2 = (0, tslib_1.__importStar)(require(\"@angular/router\"));\nconst i3 = (0, tslib_1.__importStar)(require(\"../../services/cross.service\"));\nconst i4 = (0, tslib_1.__importStar)(require(\"../../services/auth.service\"));\nconst i5 = (0, tslib_1.__importStar)(require(\"@mobiscroll/angular\"));\nconst i6 = (0, tslib_1.__importStar)(require(\"@angular/common\"));\n\nfunction NavbarComponent_mbsc_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mbsc-button\", 6);\n    i0.ɵɵlistener(\"click\", function NavbarComponent_mbsc_button_1_Template_mbsc_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.goHome();\n    });\n    i0.ɵɵtext(1, \"Home \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NavbarComponent_mbsc_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mbsc-button\", 7);\n    i0.ɵɵlistener(\"click\", function NavbarComponent_mbsc_button_2_Template_mbsc_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.logout();\n    });\n    i0.ɵɵtext(1, \" Logout\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NavbarComponent_mbsc_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mbsc-button\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.username);\n  }\n}\n\nfunction NavbarComponent_mbsc_bottom_nav_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mbsc-bottom-nav\", 9);\n    i0.ɵɵlistener(\"onItemTap\", function NavbarComponent_mbsc_bottom_nav_8_Template_mbsc_bottom_nav_onItemTap_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.navItemTapped($event);\n    });\n    i0.ɵɵelementStart(1, \"mbsc-nav-item\");\n    i0.ɵɵtext(2, \"Subscriptions\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mbsc-nav-item\");\n    i0.ɵɵtext(4, \"Affiliate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mbsc-nav-item\");\n    i0.ɵɵtext(6, \"New Branch\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mbsc-nav-item\");\n    i0.ɵɵtext(8, \"New Store\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"mbsc-nav-item\");\n    i0.ɵɵtext(10, \"Places\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"mbsc-nav-item\");\n    i0.ɵɵtext(12, \"Services\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"options\", ctx_r3.iconNav);\n  }\n}\n\nlet NavbarComponent = /*#__PURE__*/(() => {\n  class NavbarComponent {\n    constructor(_translate, router, activeRoute, crossService, auth) {\n      this._translate = _translate;\n      this.router = router;\n      this.activeRoute = activeRoute;\n      this.crossService = crossService;\n      this.auth = auth;\n      this.formSettings = {\n        theme: 'ios',\n        lang: 'en'\n      };\n      this.iconNav = {\n        lang: 'ar',\n        theme: 'ios',\n        type: 'top',\n        display: 'inline'\n      };\n      this.gearMenu = {\n        lang: 'ar',\n        theme: 'ios',\n        type: 'hamburger',\n        menuIcon: 'line-settings'\n      };\n      this.iconMenu = {\n        lang: 'ar',\n        theme: 'ios',\n        type: 'hamburger'\n      };\n      this.showHambMenu = false;\n    }\n\n    ngOnInit() {\n      this.supportedLanguages = [{\n        display: 'English',\n        value: 'en'\n      }, {\n        display: 'Arabic',\n        value: 'ar'\n      }];\n\n      this._translate.use('en');\n\n      this.salonAdminTitle = this._translate.instant(langs_trans.SALON_ADMIN);\n      this.createStoreOwnerText = this._translate.instant(langs_trans.CREATE_STORE_OWNER);\n      this.createCountryText = this._translate.instant(langs_trans.CREATE_COUNTRY_TEXT);\n      this.createStatesText = this._translate.instant(langs_trans.CREATE_STATES_LBL);\n      this.createCitiesText = this._translate.instant(langs_trans.CREATE_CITIES_LBL);\n      this.createTownsText = this._translate.instant(langs_trans.CREATE_TOWNS_LBL);\n      this.createBlocksText = this._translate.instant(langs_trans.CREATE_BLOCK_LBL);\n      this.createBusinessTypeText = this._translate.instant(langs_trans.CREATE_BUSINESS_TYPE);\n      this.userAuthSub = this.auth.user$.pipe((0, operators_1.map)(user => {\n        console.log(user);\n\n        if (user && user.superAdmin) {\n          return true;\n        } else {\n          return false;\n        }\n      }), (0, operators_1.tap)(isAdmin => {\n        console.log('user admin is ' + isAdmin);\n\n        if (!isAdmin) {\n          return false;\n        } else {\n          return true;\n        }\n      })).subscribe(isAdmin => {\n        if (isAdmin) {\n          this.showNavigation = true;\n          this.auth.getLoggedInUserName().take(1).subscribe(user => {\n            this.username = user.name;\n          });\n        } else {\n          this.showNavigation = false;\n        }\n      });\n    }\n\n    navItemTapped(event) {\n      if (event.target.innerText == 'New Store') {\n        this.router.navigate(['owner'], {\n          relativeTo: this.activeRoute\n        }).then(result => {\n          console.log(result);\n        });\n        this.crossService.sendFormClearFlag(true);\n      } else if (event.target.innerText == 'New Branch') {\n        this.router.navigate(['owner/ownersearch'], {\n          relativeTo: this.activeRoute\n        }).then(result => {\n          console.log(result);\n        });\n        this.crossService.sendFormClearFlag(true);\n      } else if (event.target.innerText == 'Places') {\n        this.router.navigate(['admin']);\n      } else if (event.target.innerText == 'Services') {\n        this.router.navigate(['admin/services']);\n      } else if (event.target.innerText == 'Affiliate') {\n        this.router.navigate(['affiliate']);\n      } else if (event.target.innerText == 'Subscriptions') {\n        this.router.navigate(['subscription']);\n      }\n    }\n\n    goHome() {\n      this.router.navigate(['home']);\n    }\n\n    logout() {\n      this.auth.signOut().then(() => {\n        this.router.navigate(['login']);\n      });\n    }\n\n    ngOnDestroy() {\n      this.userAuthSub.unsubscribe();\n    }\n\n  }\n\n  NavbarComponent.ɵfac = function NavbarComponent_Factory(t) {\n    return new (t || NavbarComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.CrossService), i0.ɵɵdirectiveInject(i4.AuthService));\n  };\n\n  NavbarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NavbarComponent,\n    selectors: [[\"app-navbar\"]],\n    decls: 9,\n    vars: 5,\n    consts: [[3, \"options\"], [\"flat\", \"\", \"icon\", \"home\", \"color\", \"primary\", \"style\", \"float: left;\", 3, \"click\", 4, \"ngIf\"], [\"flat\", \"\", \"color\", \"primary\", \"icon\", \"unlocked\", \"style\", \"float: left;\", 3, \"click\", 4, \"ngIf\"], [\"flat\", \"\", \"color\", \"primary\", \"style\", \"float: left;\", 4, \"ngIf\"], [1, \"mbsc-align-center\", 2, \"color\", \"black\", \"font-size\", \"20px\", \"font-style\", \"oblique\", \"width\", \"100%\"], [3, \"options\", \"onItemTap\", 4, \"ngIf\"], [\"flat\", \"\", \"icon\", \"home\", \"color\", \"primary\", 2, \"float\", \"left\", 3, \"click\"], [\"flat\", \"\", \"color\", \"primary\", \"icon\", \"unlocked\", 2, \"float\", \"left\", 3, \"click\"], [\"flat\", \"\", \"color\", \"primary\", 2, \"float\", \"left\"], [3, \"options\", \"onItemTap\"]],\n    template: function NavbarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mbsc-form\", 0);\n        i0.ɵɵtemplate(1, NavbarComponent_mbsc_button_1_Template, 2, 0, \"mbsc-button\", 1);\n        i0.ɵɵtemplate(2, NavbarComponent_mbsc_button_2_Template, 2, 0, \"mbsc-button\", 2);\n        i0.ɵɵtemplate(3, NavbarComponent_mbsc_button_3_Template, 2, 1, \"mbsc-button\", 3);\n        i0.ɵɵelement(4, \"br\")(5, \"br\");\n        i0.ɵɵelementStart(6, \"p\", 4);\n        i0.ɵɵtext(7, \" Oman Apps Admin \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, NavbarComponent_mbsc_bottom_nav_8_Template, 13, 1, \"mbsc-bottom-nav\", 5);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"options\", ctx.formSettings);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showNavigation);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showNavigation);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showNavigation);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.showNavigation);\n      }\n    },\n    directives: [i5.MbscForm, i6.NgIf, i5.MbscButton, i5.MbscBottomNav, i5.MbscNavItem],\n    styles: [\"\"]\n  });\n  return NavbarComponent;\n})();\n(0, tslib_1.__decorate)([(0, ng_block_ui_1.BlockUI)(), (0, tslib_1.__metadata)(\"design:type\", Object)], NavbarComponent.prototype, \"blockUI\", void 0);\nexports.NavbarComponent = NavbarComponent;","map":null,"metadata":{},"sourceType":"script"}