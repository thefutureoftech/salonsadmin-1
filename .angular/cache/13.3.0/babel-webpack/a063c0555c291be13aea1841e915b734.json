{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OwnersearchComponent = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst router_1 = require(\"@angular/router\");\n\nconst store_service_1 = require(\"../../services/store.service\");\n\nconst user_dbservice_1 = require(\"../../services/user.dbservice\");\n\nconst i0 = (0, tslib_1.__importStar)(require(\"@angular/core\"));\nconst i1 = (0, tslib_1.__importStar)(require(\"../../services/user.dbservice\"));\nconst i2 = (0, tslib_1.__importStar)(require(\"@angular/router\"));\nconst i3 = (0, tslib_1.__importStar)(require(\"../../services/store.service\"));\nconst i4 = (0, tslib_1.__importStar)(require(\"@mobiscroll/angular\"));\nconst i5 = (0, tslib_1.__importStar)(require(\"@angular/forms\"));\nconst i6 = (0, tslib_1.__importStar)(require(\"@angular/common\"));\nconst i7 = (0, tslib_1.__importStar)(require(\"@angular/material/progress-spinner\"));\n\nfunction OwnersearchComponent_mat_spinner_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 9);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"diameter\", 40);\n  }\n}\n\nfunction OwnersearchComponent_mbsc_note_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mbsc-note\", 10)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.resultString);\n  }\n}\n\nfunction OwnersearchComponent_mbsc_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mbsc-button\", 11);\n    i0.ɵɵtext(1, \" Add a Branch \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r0 = i0.ɵɵreference(2);\n\n    i0.ɵɵproperty(\"disabled\", _r0.invalid && (_r0.dirty || _r0.touched));\n  }\n}\n\nfunction OwnersearchComponent_mat_spinner_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 9);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"diameter\", 40);\n  }\n}\n\nclass OwnersearchComponent {\n  constructor(userdbService, router, activeRoute, storeService) {\n    this.userdbService = userdbService;\n    this.router = router;\n    this.activeRoute = activeRoute;\n    this.storeService = storeService;\n  }\n\n  ngOnInit() {\n    this.init();\n  }\n\n  init() {\n    this.formSettings = {\n      theme: 'ios',\n      lang: 'en',\n      inputStyle: 'outline',\n      labelStyle: 'stacked'\n    };\n  }\n\n  proceed() {\n    this.startGoing = true;\n    this.router.navigate(['../../businessDetails'], {\n      relativeTo: this.activeRoute,\n      queryParams: {\n        storeId: this.storeId\n      }\n    }).then(result => {\n      this.startGoing = false;\n    });\n  }\n\n  search(event) {\n    return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n      if (event.target.value.trim() === '' || !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(event.target.value)) {\n        this.showResult = false;\n        this.ownerExist = false;\n        return;\n      }\n\n      this.startSearch = true;\n      this.showResult = false; // this.returnedData = await this.clientService.searchClientByPhoneNumber(event.target.value);\n\n      this.email = event.target.value;\n      let result = yield this.userdbService.checkIfAlreadyOwner(this.email).toPromise();\n      console.log(result);\n\n      if (result && result.result) {\n        this.storeId = result.storeData.id;\n        this.storeService.setStore(result.storeData);\n        this.ownerExist = true;\n        this.resultString = 'Owner Found';\n      } else {\n        this.storeService.setStore(null);\n        this.ownerExist = false;\n        this.resultString = 'Owner Not Found';\n      }\n\n      this.startSearch = false;\n      this.showResult = true;\n    });\n  }\n\n}\n\nexports.OwnersearchComponent = OwnersearchComponent;\n\nOwnersearchComponent.ɵfac = function OwnersearchComponent_Factory(t) {\n  return new (t || OwnersearchComponent)(i0.ɵɵdirectiveInject(i1.UserDBService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.StoreService));\n};\n\nOwnersearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OwnersearchComponent,\n  selectors: [[\"app-ownersearch\"]],\n  decls: 12,\n  vars: 5,\n  consts: [[3, \"options\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"frm\", \"ngForm\"], [2, \"text-align\", \"center\"], [\"input-style\", \"outline\", \"label-style\", \"floating\", 3, \"keyup\"], [\"style\", \"margin:0 auto;\", 3, \"diameter\", 4, \"ngIf\"], [\"color\", \"info\", 4, \"ngIf\"], [1, \"mbsc-btn-group-justified\"], [\"type\", \"submit\", \"color\", \"dark\", 3, \"disabled\", 4, \"ngIf\"], [2, \"margin\", \"0 auto\", 3, \"diameter\"], [\"color\", \"info\"], [\"type\", \"submit\", \"color\", \"dark\", 3, \"disabled\"]],\n  template: function OwnersearchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mbsc-form\", 0)(1, \"form\", 1, 2);\n      i0.ɵɵlistener(\"ngSubmit\", function OwnersearchComponent_Template_form_ngSubmit_1_listener() {\n        return ctx.proceed();\n      });\n      i0.ɵɵelementStart(3, \"h3\", 3);\n      i0.ɵɵtext(4, \"Store Owner Search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"mbsc-input\", 4);\n      i0.ɵɵlistener(\"keyup\", function OwnersearchComponent_Template_mbsc_input_keyup_5_listener($event) {\n        return ctx.search($event);\n      });\n      i0.ɵɵtext(6, \" Search By Email \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(7, OwnersearchComponent_mat_spinner_7_Template, 1, 1, \"mat-spinner\", 5);\n      i0.ɵɵtemplate(8, OwnersearchComponent_mbsc_note_8_Template, 3, 1, \"mbsc-note\", 6);\n      i0.ɵɵelementStart(9, \"div\", 7);\n      i0.ɵɵtemplate(10, OwnersearchComponent_mbsc_button_10_Template, 2, 1, \"mbsc-button\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(11, OwnersearchComponent_mat_spinner_11_Template, 1, 1, \"mat-spinner\", 5);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"options\", ctx.formSettings);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.startSearch);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showResult);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.ownerExist);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.startGoing);\n    }\n  },\n  directives: [i4.MbscForm, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i4.MbscInput, i6.NgIf, i7.MatProgressSpinner, i4.MbscNote, i4.MbscButton],\n  styles: [\"\"]\n});","map":null,"metadata":{},"sourceType":"script"}