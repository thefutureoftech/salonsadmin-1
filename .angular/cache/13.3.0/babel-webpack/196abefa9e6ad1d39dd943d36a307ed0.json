{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AddaffiliateComponent = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst core_1 = require(\"@angular/core\");\n\nconst affiliate_service_1 = require(\"../../../services/affiliate.service\");\n\nconst i0 = (0, tslib_1.__importStar)(require(\"@angular/core\"));\nconst i1 = (0, tslib_1.__importStar)(require(\"../../../services/affiliate.service\"));\nconst i2 = (0, tslib_1.__importStar)(require(\"@mobiscroll/angular\"));\nconst i3 = (0, tslib_1.__importStar)(require(\"@angular/forms\"));\nconst i4 = (0, tslib_1.__importStar)(require(\"@angular/common\"));\nconst i5 = (0, tslib_1.__importStar)(require(\"@angular/material/progress-spinner\"));\n\nfunction AddaffiliateComponent_mat_spinner_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 7);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"diameter\", 40);\n  }\n}\n\nfunction AddaffiliateComponent_mbsc_note_8_mbsc_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mbsc-button\", 10);\n    i0.ɵɵlistener(\"click\", function AddaffiliateComponent_mbsc_note_8_mbsc_button_3_Template_mbsc_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.makeAffiliate(ctx_r6.user.uid, false);\n    });\n    i0.ɵɵtext(1, \" Deactivate Affiliate \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddaffiliateComponent_mbsc_note_8_mbsc_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mbsc-button\", 10);\n    i0.ɵɵlistener(\"click\", function AddaffiliateComponent_mbsc_note_8_mbsc_button_4_Template_mbsc_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.makeAffiliate(ctx_r8.user.uid, true);\n    });\n    i0.ɵɵtext(1, \" Activate Affiliate \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AddaffiliateComponent_mbsc_note_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mbsc-note\", 8)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, AddaffiliateComponent_mbsc_note_8_mbsc_button_3_Template, 2, 0, \"mbsc-button\", 9);\n    i0.ɵɵtemplate(4, AddaffiliateComponent_mbsc_note_8_mbsc_button_4_Template, 2, 0, \"mbsc-button\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.user.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.user.affiliate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.user.affiliate);\n  }\n}\n\nfunction AddaffiliateComponent_mat_spinner_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 7);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"diameter\", 40);\n  }\n}\n\nclass AddaffiliateComponent {\n  constructor(affiliateService, ngZone) {\n    this.affiliateService = affiliateService;\n    this.ngZone = ngZone;\n    this.formSettings = {\n      theme: 'ios',\n      inputStyle: 'outline',\n      labelStyle: 'stacked'\n    };\n  }\n\n  ngOnInit() {}\n\n  search(event) {\n    return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n      this.startSearch = true;\n      this.user = null;\n\n      if (event.target.value.trim() === '' || event.target.value.length != 8) {\n        this.startSearch = false;\n        this.showResult = false;\n        return;\n      }\n\n      this.user = yield this.affiliateService.getUserByPhoneNumber(event.target.value);\n      this.ngZone.run(() => {\n        this.startSearch = false;\n\n        if (this.user) {\n          this.showResult = true;\n        } else {\n          this.showResult = false;\n        }\n      });\n    });\n  }\n\n  makeAffiliate(userId, toggleAffiliate) {\n    return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n      this.startMaking = true;\n      yield this.affiliateService.toggleAffiliate(userId, toggleAffiliate);\n      this.ngZone.run(() => {\n        this.startMaking = false;\n      });\n    });\n  }\n\n}\n\nexports.AddaffiliateComponent = AddaffiliateComponent;\n\nAddaffiliateComponent.ɵfac = function AddaffiliateComponent_Factory(t) {\n  return new (t || AddaffiliateComponent)(i0.ɵɵdirectiveInject(i1.AffiliateService), i0.ɵɵdirectiveInject(i0.NgZone));\n};\n\nAddaffiliateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddaffiliateComponent,\n  selectors: [[\"app-addaffiliate\"]],\n  decls: 10,\n  vars: 4,\n  consts: [[3, \"options\"], [\"novalidate\", \"\"], [\"frm\", \"ngForm\"], [2, \"text-align\", \"center\"], [\"input-style\", \"outline\", \"label-style\", \"floating\", 3, \"keyup\"], [\"style\", \"margin:0 auto;\", 3, \"diameter\", 4, \"ngIf\"], [\"color\", \"info\", 4, \"ngIf\"], [2, \"margin\", \"0 auto\", 3, \"diameter\"], [\"color\", \"info\"], [\"type\", \"button\", \"color\", \"dark\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"color\", \"dark\", 3, \"click\"]],\n  template: function AddaffiliateComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mbsc-form\", 0)(1, \"form\", 1, 2)(3, \"h3\", 3);\n      i0.ɵɵtext(4, \"User Search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"mbsc-input\", 4);\n      i0.ɵɵlistener(\"keyup\", function AddaffiliateComponent_Template_mbsc_input_keyup_5_listener($event) {\n        return ctx.search($event);\n      });\n      i0.ɵɵtext(6, \" Search By Phone Number \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(7, AddaffiliateComponent_mat_spinner_7_Template, 1, 1, \"mat-spinner\", 5);\n      i0.ɵɵtemplate(8, AddaffiliateComponent_mbsc_note_8_Template, 5, 3, \"mbsc-note\", 6);\n      i0.ɵɵtemplate(9, AddaffiliateComponent_mat_spinner_9_Template, 1, 1, \"mat-spinner\", 5);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"options\", ctx.formSettings);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.startSearch);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showResult && ctx.user);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.startMaking);\n    }\n  },\n  directives: [i2.MbscForm, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i2.MbscInput, i4.NgIf, i5.MatProgressSpinner, i2.MbscNote, i2.MbscButton],\n  styles: [\"\"]\n});","map":null,"metadata":{},"sourceType":"script"}